<?xml version="1.0" encoding="UTF-8" ?>
<!--
Copyright (C) 2016 Apple Inc. All Rights Reserved.
See LICENSE.txt for this sampleâ€™s licensing information

-->
<document>
    <head id="menuBar">
        <style>
            @media tv-template and (tv-theme:light) {
            .foo { color:rgb(0, 0, 0); tv-highlight-color:rgb(0, 0, 0);}
            }
            @media tv-template and (tv-theme:dark) {
            .foo { color:rgb(255, 255, 255); tv-highlight-color:rgb(255,255,255);}
            }
        </style>
    </head>

    <stackTemplate title="Favorites" id="fav">
        {% if not favs %}
        <banner style="margin: 300">
            <title class="foo">Favorite addons will be displayed here</title>
        </banner>
        {% endif %}
        <collectionList>
            <grid>
                <section>
                    {% for plugin in favs %}
                    <lockup onholdselect="post('/getAddonData', '{{plugin.id | base64encode}}')" onselect="catalog('{{plugin.id | base64encode}}')">
                        <img src="/{{plugin.icon}}" width="256" height="256"/>
                        <title class="foo">{{plugin.name}}</title>
                    </lockup>
                    {% endfor %}
                </section>
            </grid>
        </collectionList>
    </stackTemplate>

    <stackTemplate title="All" id="all">
        {% if not menu %}
        <banner style="margin: 300">
            <title class="foo">Install addons in the "Settings" section</title>
        </banner>
        {% endif %}
        <collectionList>
            <grid>
                <section>
                    {% for plugin in menu %}
                    <lockup onholdselect="post('/getAddonData', '{{plugin.id | base64encode}}')" onselect="catalog('{{plugin.id | base64encode}}')">
                        <img src="/{{plugin.icon}}" width="256" height="256"/>
                        <title class="foo">{{plugin.name}}</title>
                    </lockup>
                    {% endfor %}
                </section>
            </grid>
        </collectionList>
    </stackTemplate>

    <catalogTemplate autoHighlight="true" title="Settings" id="settings">
        <list>
            <section>
                <listItemLockup autoHighlight="true">
                    <title style="tv-text-style:title3">Addons</title>
                    <relatedContent>
                        <list style="width: 1000">
                            <section>
                                <header><title>Search for new and exciting addons to install</title></header>
                                <listItemLockup onselect="load('/allAddons')">
                                    <title>View all</title>
                                </listItemLockup>
                                <listItemLockup onselect="post('/browseAddons')">
                                    <title>View by type</title>
                                </listItemLockup>
                                <listItemLockup onselect="showInputDialog('Search', 'Search by name or id', 'Search', 'OK', false, function(ans) { if (typeof ans != 'undefined') { post('/browseAddons', ans) } })">
                                    <title>Search</title>
                                </listItemLockup>
                            </section>
                        </list>
                    </relatedContent>
                </listItemLockup>
            </section>
            <section>
                <listItemLockup>
                    <title style="tv-text-style:title3">Repositories</title>
                    <relatedContent>
                        <list style="width: 1000">
                            <section>
                                <header><title>Browse addons by repository or add a new repository from file</title></header>
                                <listItemLockup onselect="load('/repositories')">
                                    <title>Browse</title>
                                </listItemLockup>
                                <listItemLockup onselect="load('/refreshRepositories')">
                                    <title>Refresh</title>
                                </listItemLockup>
                                <listItemLockup onselect="browse(null, '.*\.zip', function(xhr) {post('/addRepository', btoa(xhr.responseText))})">
					                <title>Add from zip file</title>
				                </listItemLockup>
                            </section>
                        </list>
                    </relatedContent>
                </listItemLockup>
            </section>
            <section>
                <listItemLockup>
                    <title style="tv-text-style:title3">Language</title>
                    <relatedContent>
                        <list style="width: 1000">
                            <section>
                                <header><title>Modify the language used by addons</title></header>
                                <listItemLockup onselect="showSelectDialog('Select language', {{languages}}, {{languages}}.indexOf('{{current_language}}'), function(ans) { if (typeof ans != 'undefined') {localStorage.setItem('language', ans); notify('/setLanguage', btoa(ans)); event.target.children.item(1).textContent=ans;}});">
                                    <title>Addons language</title>
                                    <decorationLabel class="foo">{{current_language}}</decorationLabel>
                                </listItemLockup>
                            </section>
                        </list>
                    </relatedContent>
                </listItemLockup>
            </section>
            <section>
                <listItemLockup>
                    <title style="tv-text-style:title3">Server maintenance</title>
                    <relatedContent>
                        <list style="width: 1000">
                            <section>
                                <header><title>Advanced server actions</title></header>
                                <listItemLockup onselect="load('/viewLog')">
                                    <title>View server log</title>
                                </listItemLockup>
                                <listItemLockup onselect="notify('/clearLog')">
                                    <title>Clear server log</title>
                                </listItemLockup>
                                <listItemLockup onselect="restartServer()">
                                    <title>Restart server</title>
                                </listItemLockup>
                                <listItemLockup onselect="load('/checkForUpdate')">
                                    <title>Check for update</title>
                                </listItemLockup>
                            </section>
                        </list>
                    </relatedContent>
                </listItemLockup>
            </section>
        </list>
    </catalogTemplate>
</document>
